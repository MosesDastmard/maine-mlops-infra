# helm/mysql.api.yaml - CORRECTED
architecture: replication
auth:
  rootPassword: "4k0pYu4JMcZlG8KP"
  username: "admin"
  password: "4k0pYu4JMcZlG8KP"
  replicationPassword: "4k0pYu4JMcZlG8KP"

# CRITICAL: Use the legacy repository
image:
  registry: docker.io
  repository: bitnamilegacy/mysql  # âœ… MUST use bitnamilegacy
  tag: "9.4.0-debian-12-r1"  # This tag EXISTS in legacy repo

primary:
  persistence:
    enabled: true
    storageClass: "local-path"
    size: 10Gi
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 500m
      memory: 1Gi
  service:
    type: NodePort
    nodePorts:
      mysql: 30306

secondary:
  replicaCount: 1
  persistence:
    enabled: true
    storageClass: "local-path"
    size: 10Gi
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi

# Fix metrics exporter
metrics:
  enabled: false