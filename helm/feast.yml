# Feast Feature Server Helm Values
# Chart: feast-charts/feast-feature-server
# Repo: https://feast-helm-charts.storage.googleapis.com
#
# Dependencies (deployed separately):
#   - feast-postgresql: PostgreSQL for registry
#   - feast-redis: Redis for online store

replicaCount: 1

image:
  repository: feastdev/feature-server
  pullPolicy: IfNotPresent
  tag: "0.46.0"

logLevel: "INFO"

# Feast deployment mode: online, offline, ui, registry
feast_mode: "ui"

# Base64 encoded feature_store.yaml
# Decoded config:
#   project: mlops_features
#   provider: local
#   registry:
#     registry_type: sql
#     path: postgresql://feast:***@feast-postgresql.mlops-feast.svc.cluster.local:5432/feast_registry
#   online_store:
#     type: redis
#     connection_string: feast-redis-master.mlops-feast.svc.cluster.local:6379,password=***
#   offline_store:
#     type: postgres
#     host: feast-postgresql.mlops-feast.svc.cluster.local
#     port: 5432
#     database: feast_registry
#     user: feast
#     password: ***
#   entity_key_serialization_version: 3
feature_store_yaml_base64: "cHJvamVjdDogbWxvcHNfZmVhdHVyZXMKcHJvdmlkZXI6IGxvY2FsCnJlZ2lzdHJ5OgogIHJlZ2lzdHJ5X3R5cGU6IHNxbAogIHBhdGg6IHBvc3RncmVzcWw6Ly9mZWFzdDpNb3NlczE3NDlGZWFzdCFAZmVhc3QtcG9zdGdyZXNxbC5tbG9wcy1mZWFzdC5zdmMuY2x1c3Rlci5sb2NhbDo1NDMyL2ZlYXN0X3JlZ2lzdHJ5Cm9ubGluZV9zdG9yZToKICB0eXBlOiByZWRpcwogIGNvbm5lY3Rpb25fc3RyaW5nOiBmZWFzdC1yZWRpcy1tYXN0ZXIubWxvcHMtZmVhc3Quc3ZjLmNsdXN0ZXIubG9jYWw6NjM3OSxwYXNzd29yZD1Nb3NlczE3NDlGZWFzdFJlZGlzIQpvZmZsaW5lX3N0b3JlOgogIHR5cGU6IHBvc3RncmVzCiAgaG9zdDogZmVhc3QtcG9zdGdyZXNxbC5tbG9wcy1mZWFzdC5zdmMuY2x1c3Rlci5sb2NhbgogIHBvcnQ6IDU0MzIKICBkYXRhYmFzZTogZmVhc3RfcmVnaXN0cnkKICB1c2VyOiBmZWFzdAogIHBhc3N3b3JkOiBNb3NlczE3NDlGZWFzdCEKZW50aXR5X2tleV9zZXJpYWxpemF0aW9uX3ZlcnNpb246IDMK"

service:
  type: NodePort
  port: 80

resources:
  requests:
    memory: "512Mi"
    cpu: "200m"
  limits:
    memory: "1Gi"
    cpu: "1000m"

livenessProbe:
  initialDelaySeconds: 60
  periodSeconds: 30

readinessProbe:
  initialDelaySeconds: 30
  periodSeconds: 10
