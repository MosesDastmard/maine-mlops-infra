# Kafka Helm Values (Bitnami)
# Real-time streaming for sales data from stores/regions

# Use a specific image tag that exists
image:
  registry: docker.io
  repository: bitnami/kafka
  tag: 3.8.0

# Kraft mode (no Zookeeper dependency)
kraft:
  enabled: true

# Listeners configuration
listeners:
  client:
    protocol: PLAINTEXT
  controller:
    protocol: PLAINTEXT
  interbroker:
    protocol: PLAINTEXT
  external:
    protocol: PLAINTEXT

# Controller configuration (KRaft mode)
controller:
  replicaCount: 1
  persistence:
    enabled: true
    storageClass: local-path
    size: 10Gi
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# Broker configuration
broker:
  replicaCount: 1
  persistence:
    enabled: true
    storageClass: local-path
    size: 20Gi
  resources:
    requests:
      memory: "512Mi"
      cpu: "250m"
    limits:
      memory: "2Gi"
      cpu: "1000m"

# External access via NodePort
externalAccess:
  enabled: true
  broker:
    service:
      type: NodePort
      nodePorts:
        - 30092
  controller:
    service:
      type: NodePort
      nodePorts:
        - 30093

# Kafka settings optimized for high-throughput sales data
extraConfig: |
  log.retention.hours=168
  log.retention.bytes=10737418240
  num.partitions=12
  default.replication.factor=1
  min.insync.replicas=1
  message.max.bytes=10485760
  replica.fetch.max.bytes=10485760

# Disable SASL for simplicity (internal cluster use)
sasl:
  client:
    users:
      - admin
    passwords: Moses1749Kafka!

# Metrics for Prometheus
metrics:
  kafka:
    enabled: true
  jmx:
    enabled: true
  serviceMonitor:
    enabled: false
